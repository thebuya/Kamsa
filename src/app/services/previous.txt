"use client";

import React, {useState, Fragment} from 'react';
import Image from 'next/image';
import { Combobox,  Transition } from '@headlessui/react';
import { services } from '../constants';

import { SearchServicesProps } from '../types';

const Services = ({selectedService, setSelectedService } : SearchServicesProps) => {
  const [query, setQuery] = useState('')

  const filteredServices =
    query === ''
      ? services
      : services.filter((service) => {
          return service.toLowerCase().includes(query.toLowerCase())
        })

  return (
    <main className='kamsa-container '>
      <header>
          <h1 className="heading">
            Our Services: 
              <span className="highlight">
              {" "}Tailored Solutions for Sustainable Financial & Grants Management
              </span>. 
          </h1>
      </header>


      <section className="section-container services-section">

        <aside className='services-search'>
            <Combobox value={selectedService} onChange={setSelectedService}>
            <div className="relative w-full">

                    <Combobox.Input
                        className="search-manufacturer__input"
                        placeholder="Kitenge Design"
                        displayValue={(selectedService: string)=>selectedService}
                        onChange={(e) => setQuery(e.target.value)}
                    />
                    <Transition
                    as={Fragment}
                    leave="transition ease-in duration-100"
                    leaveFrom="opacity-100"
                    leaveTo="opacity-0"
                    afterLeave={() => setQuery('')}
                    >


                <Combobox.Options>
                        {filteredServices.length === 0 && query !== "" && (
                        <Combobox.Option
                         value={query}
                         className="search-manufacturer__option"
                        >
                            Create {query}  
                        </Combobox.Option>
                        )} : {
                        filteredServices.map((item) => (
                            <Combobox.Option
                             key={item}
                             className={({ active}) => `relative search-manufacturer__option 
                               ${active ? 'bg-primary-blue text-white' 
                               : 'text-gray-900'}
                             `}
                             value={item}
                            >
                                 {({ selected, active }) => (
                                    <>
                                     <span
                          className={`block truncate ${
                            selected ? 'font-medium' : 'font-normal'
                          }`}
                        >
                          {item}
                        </span>
                        {selected ? (
                          <span
                            className={`absolute inset-y-0 left-0 flex items-center pl-3 ${
                              active ? 'text-white' : 'text-teal-600'
                            }`}
                          >
                          </span>
                        ) : null}
                                    </>
                                 )}
                            </Combobox.Option>
                        )
                    )}
                </Combobox.Options>
                </Transition>
            </div>
        </Combobox>
        </aside>

        <section className='services-articles'>
          <article className='service-article' id='service1'>
            <h2 className="paragraph-header">
            Advisory Services and Policy Development
            </h2>
            <p className='article-text'>
                    We pride in working with entities to ensure
                    that we contribute to creating the positive 
                    impact/change that our clients strive to create 
                    in the communities they serve to improve their 
                    quality of life, and ensure a more self-reliant 
                    and sustainable future. 
            </p>
            <br />
              <ul className='article-text'>
                    <li>
                      Offering professional procurement and supply chain services.
                    </li>
                    <li>
                      Assisting in the recruitment and recommendation of professional staff.         
                    </li>
                    <li>
                      Developing customized advisory services tailored to the needs of clients.
                    </li>
                    <li>
                      Contributing to the development of policies and best practices in grants management, budgeting, finance, operations, procurement, and travel.
                    </li>
              </ul>
            

          </article>

        
        </section>

      </section>


    </main>
  )
}

export default Services